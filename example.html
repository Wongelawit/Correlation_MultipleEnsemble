<!DOCTYPE html>
<html>
  <head>

    <title>Multiple Ensembles Grid Example</title>

    <script src="jspsych-6.0.5/jspsych.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-multiple-ensembles-grid.js"></script>
    <link href="jspsych-6.0.5/css/jspsych.css" rel="stylesheet" type="text/css"></link>

    <style>

    img{
      z-index: -1;
      position: relative;
      width: auto;
      display: block;
      object-fit: fill;
      width: 100%;
      height: 100%;
    }

    #test { visibility: hidden; width: 100cm; height: 100cm; } 

    .grid-container {
      display: grid;
      border: 1px solid #000;
/*      padding: 10px;*/
    }

    </style>

  </head>
  <body>
  <div id="test"></div>
  <script>

    const PIXELS_PER_CM = document.getElementById("test").getBoundingClientRect().height/100;

    let timeline = [];

    let distractor_path = "stimuli/BLUE/BLUE_CHR.svg";
    let target_path = "stimuli/RED/RED_CHR.svg";

    let distractor_size = 20;
    let target_size = 15;

    // Does not take keyboard input, will wait for trial_duration
    let stimuli_no_keyboard_input = {
      type: 'multiple-ensembles-grid',
      choices: ['z', 'm'],
      trial_duration: null, // <----
      grid_size: [36, 36],
      distribution_sizes: [distractor_size, target_size],
      stimuli: [distractor_path, target_path],
      response_ends_trial: true // <----
    }

    timeline.push(stimuli_no_keyboard_input);

    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

  </script>
  </html>